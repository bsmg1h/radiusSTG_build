require=function t(e,i,o){function s(c,h){if(!i[c]){if(!e[c]){var a="function"==typeof require&&require;if(!h&&a)return a(c,!0);if(n)return n(c,!0);var p=new Error("Cannot find module '"+c+"'");throw p.code="MODULE_NOT_FOUND",p}var d=i[c]={exports:{}};e[c][0].call(d.exports,function(t){var i=e[c][1][t];return s(i||t)},d,d.exports,t,e,i,o)}return i[c].exports}for(var n="function"==typeof require&&require,c=0;c<o.length;c++)s(o[c]);return s}({JoystickMovingBG:[function(t,e,i){"use strict";cc._RF.push(e,"b5296chBQ9J+7v31ryK9TP8","JoystickMovingBG");var o=t("JoystickMovingCommon");cc.Class({extends:cc.Component,properties:{dot:{default:null,type:cc.Node,displayName:"摇杆节点"},_joyCom:{default:null,displayName:"joy Node"},_playerNode:{default:null,displayName:"被操作的目标Node"},_angle:{default:null,displayName:"当前触摸的角度"},_radian:{default:null,displayName:"弧度"},_speed:0,_speed1:1,_speed2:2,_opacity:0},onLoad:function(){this._joyCom=this.node.parent.getComponent("JoystickMoving"),this._playerNode=this._joyCom.sprite,this._joyCom.touchType==o.TouchType.DEFAULT&&this._initTouchEvent()},_initTouchEvent:function(){var t=this;t.node.on(cc.Node.EventType.TOUCH_START,this._touchStartEvent,t),t.node.on(cc.Node.EventType.TOUCH_MOVE,this._touchMoveEvent,t),t.node.on(cc.Node.EventType.TOUCH_END,this._touchEndEvent,t),t.node.on(cc.Node.EventType.TOUCH_CANCEL,this._touchEndEvent,t)},update:function(t){switch(this._joyCom.directionType){case o.DirectionType.ALL:this._allDirectionsMove(t)}},_allDirectionsMove:function(t){0!=this._speed&&(this._playerNode.getComponent("player").xSpeed+=Math.cos(this._angle*(Math.PI/180))*this._playerNode.getComponent("player").accel*t,this._playerNode.getComponent("player").ySpeed+=Math.sin(this._angle*(Math.PI/180))*this._playerNode.getComponent("player").accel*t)},_getDistance:function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},_getRadian:function(t){return this._radian=Math.PI/180*this._getAngle(t),this._radian},_getAngle:function(t){var e=this.node.getPosition();return this._angle=Math.atan2(t.y-e.y,t.x-e.x)*(180/Math.PI),this._angle},_setSpeed:function(t){this._getDistance(t,this.node.getPosition())<this._radius?this._speed=this._speed1:this._speed=this._speed2},_touchStartEvent:function(t){var e=this.node.convertToNodeSpaceAR(t.getLocation()),i=this._getDistance(e,cc.p(0,0)),o=this.node.width/2;this._stickPos=e;var s=this.node.getPosition().x+e.x,n=this.node.getPosition().y+e.y;return o>i&&(this.dot.setPosition(cc.p(s,n)),!0)},_touchMoveEvent:function(t){var e=this.node.convertToNodeSpaceAR(t.getLocation()),i=this._getDistance(e,cc.p(0,0)),o=this.node.width/2,s=this.node.getPosition().x+e.x,n=this.node.getPosition().y+e.y;if(o>i)this.dot.setPosition(cc.p(s,n));else{var c=this.node.getPosition().x+Math.cos(this._getRadian(cc.p(s,n)))*o,h=this.node.getPosition().y+Math.sin(this._getRadian(cc.p(s,n)))*o;this.dot.setPosition(cc.p(c,h))}this._getAngle(cc.p(s,n)),this._setSpeed(cc.p(s,n))},_touchEndEvent:function(){this.dot.setPosition(this.node.getPosition()),this._speed=0}}),cc._RF.pop()},{JoystickMovingCommon:"JoystickMovingCommon"}],JoystickMovingCommon:[function(t,e,i){"use strict";cc._RF.push(e,"55f22yqqXpITrVtD11Jngr7","JoystickMovingCommon"),e.exports={TouchType:cc.Enum({DEFAULT:0,FOLLOW:1}),DirectionType:cc.Enum({FOUR:4,EIGHT:8,ALL:0})},cc._RF.pop()},{}],JoystickMoving:[function(t,e,i){"use strict";cc._RF.push(e,"0eb4d2Ee+xNK6hjtA6E8fLg","JoystickMoving");var o=t("JoystickMovingCommon"),s=t("JoystickMovingBG");cc.Class({extends:cc.Component,properties:{dot:{default:null,type:cc.Node,displayName:"摇杆节点"},ring:{default:null,type:s,displayName:"摇杆背景节点"},stickX:{default:0,displayName:"摇杆X位置"},stickY:{default:0,displayName:"摇杆Y位置"},touchType:{default:o.TouchType.DEFAULT,type:o.TouchType,displayName:"触摸类型"},directionType:{default:o.DirectionType.ALL,type:o.DirectionType,displayName:"方向类型"},sprite:{default:null,type:cc.Node,displayName:"操控的目标"},_stickPos:{default:null,type:cc.Node,displayName:"摇杆当前位置"},_touchLocation:{default:null,type:cc.Node,displayName:"摇杆当前位置"}},onLoad:function(){this._createStickSprite(),this.touchType==o.TouchType.FOLLOW&&this._initTouchEvent()},_createStickSprite:function(){this.ring.node.setPosition(this.stickX,this.stickY),this.dot.setPosition(this.stickX,this.stickY)},_initTouchEvent:function(){var t=this;t.node.on(cc.Node.EventType.TOUCH_START,t._touchStartEvent,t),t.node.on(cc.Node.EventType.TOUCH_MOVE,t._touchMoveEvent,t),t.node.on(cc.Node.EventType.TOUCH_END,t._touchEndEvent,t),t.node.on(cc.Node.EventType.TOUCH_CANCEL,t._touchEndEvent,t)},_touchStartEvent:function(t){this._touchLocation=t.getLocation();var e=this.node.convertToNodeSpaceAR(t.getLocation());this.ring.node.setPosition(e),this.dot.setPosition(e),this._stickPos=e},_touchMoveEvent:function(t){if(this._touchLocation.x==t.getLocation().x&&this._touchLocation.y==t.getLocation().y)return!1;var e=this.ring.node.convertToNodeSpaceAR(t.getLocation()),i=this.ring._getDistance(e,cc.p(0,0)),o=this.ring.node.width/2,s=this._stickPos.x+e.x,n=this._stickPos.y+e.y;if(o>i)this.dot.setPosition(cc.p(s,n));else{var c=this._stickPos.x+Math.cos(this.ring._getRadian(cc.p(s,n)))*o,h=this._stickPos.y+Math.sin(this.ring._getRadian(cc.p(s,n)))*o;this.dot.setPosition(cc.p(c,h))}this.ring._getAngle(cc.p(s,n)),this.ring._setSpeed(cc.p(s,n))},_touchEndEvent:function(){this.dot.setPosition(this.ring.node.getPosition()),this.ring._speed=0}}),cc._RF.pop()},{JoystickMovingBG:"JoystickMovingBG",JoystickMovingCommon:"JoystickMovingCommon"}],JoystickShootingBG:[function(t,e,i){"use strict";cc._RF.push(e,"821790R771IWIqDMB6rfVIB","JoystickShootingBG");var o=t("JoystickShootingCommon");cc.Class({extends:cc.Component,properties:{dot:{default:null,type:cc.Node,displayName:"摇杆节点"},_joyCom:{default:null,displayName:"joy Node"},_playerNode:{default:null,displayName:"被操作的目标Node"},_angle:{default:null,displayName:"当前触摸的角度"},_radian:{default:null,displayName:"弧度"},_speed:0,_speed1:1,_speed2:2,_opacity:0},onLoad:function(){this._joyCom=this.node.parent.getComponent("JoystickShooting"),this._playerNode=this._joyCom.sprite,this._joyCom.touchType==o.TouchType.DEFAULT&&this._initTouchEvent()},_initTouchEvent:function(){var t=this;t.node.on(cc.Node.EventType.TOUCH_START,this._touchStartEvent,t),t.node.on(cc.Node.EventType.TOUCH_MOVE,this._touchMoveEvent,t),t.node.on(cc.Node.EventType.TOUCH_END,this._touchEndEvent,t),t.node.on(cc.Node.EventType.TOUCH_CANCEL,this._touchEndEvent,t)},update:function(t){switch(this._joyCom.directionType){case o.DirectionType.ALL:this._allDirectionsShoot(t)}},_allDirectionsShoot:function(t){0!=this._speed&&this._playerNode.getComponent("player").playerShoot(t,this._angle*(Math.PI/180))},_getDistance:function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},_getRadian:function(t){return this._radian=Math.PI/180*this._getAngle(t),this._radian},_getAngle:function(t){var e=this.node.getPosition();return this._angle=Math.atan2(t.y-e.y,t.x-e.x)*(180/Math.PI),this._angle},_setSpeed:function(t){this._getDistance(t,this.node.getPosition())<this._radius?this._speed=this._speed1:this._speed=this._speed2},_touchStartEvent:function(t){var e=this.node.convertToNodeSpaceAR(t.getLocation()),i=this._getDistance(e,cc.p(0,0)),o=this.node.width/2;this._stickPos=e;var s=this.node.getPosition().x+e.x,n=this.node.getPosition().y+e.y;return o>i&&(this.dot.setPosition(cc.p(s,n)),!0)},_touchMoveEvent:function(t){var e=this.node.convertToNodeSpaceAR(t.getLocation()),i=this._getDistance(e,cc.p(0,0)),o=this.node.width/2,s=this.node.getPosition().x+e.x,n=this.node.getPosition().y+e.y;if(o>i)this.dot.setPosition(cc.p(s,n));else{var c=this.node.getPosition().x+Math.cos(this._getRadian(cc.p(s,n)))*o,h=this.node.getPosition().y+Math.sin(this._getRadian(cc.p(s,n)))*o;this.dot.setPosition(cc.p(c,h))}this._getAngle(cc.p(s,n)),this._setSpeed(cc.p(s,n))},_touchEndEvent:function(){this.dot.setPosition(this.node.getPosition()),this._speed=0}}),cc._RF.pop()},{JoystickShootingCommon:"JoystickShootingCommon"}],JoystickShootingCommon:[function(t,e,i){"use strict";cc._RF.push(e,"6c14dkRKlxIwJEcuCPFCgT5","JoystickShootingCommon"),e.exports={TouchType:cc.Enum({DEFAULT:0,FOLLOW:1}),DirectionType:cc.Enum({FOUR:4,EIGHT:8,ALL:0})},cc._RF.pop()},{}],JoystickShooting:[function(t,e,i){"use strict";cc._RF.push(e,"3cfbf5bLSxHsqDeOpi0MIuE","JoystickShooting");var o=t("JoystickShootingCommon"),s=t("JoystickShootingBG");cc.Class({extends:cc.Component,properties:{dot:{default:null,type:cc.Node,displayName:"摇杆节点"},ring:{default:null,type:s,displayName:"摇杆背景节点"},stickX:{default:0,displayName:"摇杆X位置"},stickY:{default:0,displayName:"摇杆Y位置"},touchType:{default:o.TouchType.DEFAULT,type:o.TouchType,displayName:"触摸类型"},directionType:{default:o.DirectionType.ALL,type:o.DirectionType,displayName:"方向类型"},sprite:{default:null,type:cc.Node,displayName:"操控的目标"},_stickPos:{default:null,type:cc.Node,displayName:"摇杆当前位置"},_touchLocation:{default:null,type:cc.Node,displayName:"摇杆当前位置"}},onLoad:function(){this._createStickSprite(),this.touchType==o.TouchType.FOLLOW&&this._initTouchEvent()},_createStickSprite:function(){this.ring.node.setPosition(this.stickX,this.stickY),this.dot.setPosition(this.stickX,this.stickY)},_initTouchEvent:function(){var t=this;t.node.on(cc.Node.EventType.TOUCH_START,t._touchStartEvent,t),t.node.on(cc.Node.EventType.TOUCH_MOVE,t._touchMoveEvent,t),t.node.on(cc.Node.EventType.TOUCH_END,t._touchEndEvent,t),t.node.on(cc.Node.EventType.TOUCH_CANCEL,t._touchEndEvent,t)},_touchStartEvent:function(t){this._touchLocation=t.getLocation();var e=this.node.convertToNodeSpaceAR(t.getLocation());this.ring.node.setPosition(e),this.dot.setPosition(e),this._stickPos=e},_touchMoveEvent:function(t){if(this._touchLocation.x==t.getLocation().x&&this._touchLocation.y==t.getLocation().y)return!1;var e=this.ring.node.convertToNodeSpaceAR(t.getLocation()),i=this.ring._getDistance(e,cc.p(0,0)),o=this.ring.node.width/2,s=this._stickPos.x+e.x,n=this._stickPos.y+e.y;if(o>i)this.dot.setPosition(cc.p(s,n));else{var c=this._stickPos.x+Math.cos(this.ring._getRadian(cc.p(s,n)))*o,h=this._stickPos.y+Math.sin(this.ring._getRadian(cc.p(s,n)))*o;this.dot.setPosition(cc.p(c,h))}this.ring._getAngle(cc.p(s,n)),this.ring._setSpeed(cc.p(s,n))},_touchEndEvent:function(){this.dot.setPosition(this.ring.node.getPosition()),this.ring._speed=0}}),cc._RF.pop()},{JoystickShootingBG:"JoystickShootingBG",JoystickShootingCommon:"JoystickShootingCommon"}],ai1:[function(t,e,o){"use strict";cc._RF.push(e,"cdd41d7zuJCAbkswf2P+ERg","ai1"),cc.Class({extends:t("creature"),properties:{spaceMoving:!1,Damping:.01,accel:0,maxMoveSpeed:0,playerBulletPrefab:{default:null,type:cc.Prefab},bulletInterval:.3,bulletTag:1101},onLoad:function(){this.accLeft=!1,this.accRight=!1,this.accUp=!1,this.accDown=!1,this.moveLeft=!1,this.moveRight=!1,this.moveUp=!1,this.moveDown=!1,this.slowMode=!1,this.xSpeed=0,this.ySpeed=0,this.mousePosX=0,this.mousePosY=0,this.mousePressed=!0,this.playerNewBullets=[],this.T=0,this.counter=0,cc.log(this.bulletTag)},onCollisionEnter:function(t,e){t.tag!=this.bulletTag&&(this.node.setPositionX(0),this.node.setPositionY(210),1001==t.tag&&(this.node.parent.getComponent("game").playerScore+=1))},update:function(t){this.ifAi1Move(t),this.keepInsideBoundary(),this.ifAi1Shoot(t)},ifAi1Move:function(t){if(this.spaceMoving)this.spaceMoving&&(this.accLeft?this.xSpeed-=this.accel*t:this.accRight&&(this.xSpeed+=this.accel*t),this.accUp?this.ySpeed+=this.accel*t:this.accDown&&(this.ySpeed-=this.accel*t),this.xSpeed*=1-this.Damping,this.ySpeed*=1-this.Damping);else{var e=this.slowMode?.4:1;this.moveLeft?this.xSpeed=-1*e*this.maxMoveSpeed:this.moveRight?this.xSpeed=e*this.maxMoveSpeed:this.xSpeed=0,this.moveUp?this.ySpeed=e*this.maxMoveSpeed:this.moveDown?this.ySpeed=-1*e*this.maxMoveSpeed:this.ySpeed=0,0!=this.xSpeed&&0!=this.ySpeed&&(this.xSpeed=Math.sqrt(2)*this.xSpeed,this.ySpeed=Math.sqrt(2)*this.ySpeed)}Math.abs(this.xSpeed)>this.maxMoveSpeed&&(this.xSpeed=this.maxMoveSpeed*this.xSpeed/Math.abs(this.xSpeed)),Math.abs(this.ySpeed)>this.maxMoveSpeed&&(this.ySpeed=this.maxMoveSpeed*this.ySpeed/Math.abs(this.ySpeed)),this.node.x+=this.xSpeed*t,this.node.y+=this.ySpeed*t},ifAi1Shoot:function(t){if((this.mousePressed||this.shooting)&&(this.T+=t,this.T>this.bulletInterval*this.counter)){this.counter+=1,this.playerNewBullets[i]=cc.instantiate(this.playerBulletPrefab);var e=this.node.x+this.node.parent.width/2,o=this.node.y+this.node.parent.height/2;if(this.shooting)s=Math.PI/2;else{var s=Math.asin((this.mousePosY-o)/Math.sqrt((o-this.mousePosY)*(o-this.mousePosY)+(e-this.mousePosX)*(e-this.mousePosX)));this.mousePosX-e<0&&(s=Math.PI-s)}this.playerNewBullets[i].addComponent("specialBullet");var n=this.playerNewBullets[i].getComponent("specialBullet");n.speed=500,n.theta=s,this.playerNewBullets[i].getComponent(cc.CircleCollider).tag=this.bulletTag,this.playerNewBullets[i].setPosition(this.node.x,this.node.y),this.node.parent.addChild(this.playerNewBullets[i])}}}),cc._RF.pop()},{creature:"creature"}],background:[function(t,e,i){"use strict";cc._RF.push(e,"52680n/rRlHNqMnURYxNSkK","background"),cc.Class({extends:cc.Component,properties:{speedY:0},onLoad:function(){this.resetY=this.node.parent.height,this.offsetY=0},update:function(t){this.node.y-=t*this.speedY,this.offsetY+=t*this.speedY,this.offsetY>=this.resetY&&(this.node.y+=this.offsetY,this.offsetY=0)}}),cc._RF.pop()},{}],boss:[function(t,e,i){"use strict";cc._RF.push(e,"93736Wir31PvL+d3y4HUwIN","boss"),cc.Class({extends:t("creature"),properties:{radius:300,bulletPrefab:{default:null,type:cc.Prefab},bulletInterval:.05,bulletTag:9001},onLoad:function(){this.node.zIndex=9999,this.T=0,this.counter=0,this.newBullets=[]},update:function(t){this.T+=t,this.T>this.bulletInterval*this.counter&&(this.counter+=1,this.shootNewBullet(this.bulletInterval*this.counter,5,this.T%this.bulletInterval))},shootNewBullet:function(t,e,i){for(var o=0;o<e;++o){this.newBullets[o]=cc.instantiate(this.bulletPrefab);var s=t*t*Math.PI/8+2*Math.PI*o/e,n=250*i;this.newBullets[o].addComponent("bullet");var c=this.newBullets[o].getComponent("bullet");c.speed=250,c.theta=s,this.newBullets[o].setPosition(cc.p(n*Math.cos(s),n*Math.sin(s))),this.newBullets[o].getComponent(cc.CircleCollider).tag=this.bulletTag,this.node.parent.addChild(this.newBullets[o])}}}),cc._RF.pop()},{creature:"creature"}],bullet:[function(t,e,i){"use strict";cc._RF.push(e,"abdbfBI/5xFD4OJBgKT+t0p","bullet"),cc.Class({extends:cc.Component,properties:{speed:0,theta:0,origin:1},onCollisionEnter:function(t,e){e.tag-t.tag>0&&e.tag-t.tag<100||(cc.log("Bullet hit"),this.node.destroy())},update:function(t){this.bulletPositionUpdate(t),this.bulletDestroyIfOut()},bulletPositionUpdate:function(t){this.node.x+=this.speed*Math.cos(this.theta)*t,this.node.y+=this.speed*Math.sin(this.theta)*t},bulletDestroyIfOut:function(){Math.abs(this.node.x)>this.node.parent.width/2&&this.node.destroy(),Math.abs(this.node.y)>this.node.parent.height/2&&this.node.destroy()}}),cc._RF.pop()},{}],creature:[function(t,e,i){"use strict";cc._RF.push(e,"b370dmQgEZB6Lzf/QWBxwST","creature"),cc.Class({extends:cc.Component,properties:{},ctor:function(){this.id=0,this.blood=2e3,this.bulletsType=[],this.bulletInterval=.2,this.speed=50,this.shield=0,this.bomb=0},onLoad:function(){},keepInsideBoundary:function(t){this.spaceMoving?this.spaceMoving&&(this.node.x>this.node.parent.width/2-this.node.width/2?(this.node.x=this.node.parent.width/2-this.node.width/2,this.xSpeed*=-1):this.node.x<-this.node.parent.width/2+this.node.width/2&&(this.node.x=-this.node.parent.width/2+this.node.width/2,this.xSpeed*=-1),this.node.y>this.node.parent.height/2-this.node.height/2?(this.node.y=this.node.parent.height/2-this.node.height/2,this.ySpeed*=-1):this.node.y<-this.node.parent.height/2+this.node.height/2&&(this.node.y=-this.node.parent.height/2+this.node.height/2,this.ySpeed*=-1)):(this.node.x>this.node.parent.width/2-this.node.width/2?(this.node.x=this.node.parent.width/2-this.node.width/2,this.xSpeed=0):this.node.x<-this.node.parent.width/2+this.node.width/2&&(this.node.x=-this.node.parent.width/2+this.node.width/2,this.xSpeed=0),this.node.y>this.node.parent.height/2-this.node.height/2?(this.node.y=this.node.parent.height/2-this.node.height/2,this.ySpeed=0):this.node.y<-this.node.parent.height/2+this.node.height/2&&(this.node.y=-this.node.parent.height/2+this.node.height/2,this.ySpeed=0))}}),cc._RF.pop()},{}],enemy:[function(t,e,i){"use strict";cc._RF.push(e,"f1157SPiRhEhqPWTkUq6j9e","enemy"),cc.Class({extends:t("creature"),properties:{},init:function(t){this.game=t},onLoad:function(){this.hit=!1},onCollisionEnter:function(t,e){cc.log("Enemy is hit by bullet: "+(1==t.tag)),this.hit||(this.hit=!0,this.node.destroy(),this.game.spawnEnemy())}}),cc._RF.pop()},{creature:"creature"}],game:[function(t,e,i){"use strict";cc._RF.push(e,"4f565FycQFGr6Li9YrLAlyE","game");var o=cc.Enum({STG:1,PUBG:2});cc.Class({extends:cc.Component,properties:{test:1,gameMode:{default:o.STG,type:o},enemyPrefab:{default:null,type:cc.Prefab},boss:{default:null,type:cc.Node},player:{default:null,type:cc.Node},ai1:{default:null,type:cc.Node},playerScorePanel:{default:null,type:cc.Label},ai1ScorePanel:{default:null,type:cc.Label}},spawnEnemy:function(){cc.log("spawn new Enemy");var t=cc.randomMinus1To1()*this.node.width/2,e=cc.randomMinus1To1()*this.node.height/2,i=cc.instantiate(this.enemyPrefab);this.node.addChild(i),i.setPosition(cc.p(t,e)),i.getComponent("enemy").init(this)},onLoad:function(){this.T=0,this.ai1MovingT=0,this.playerScore=0,this.ai1Score=0,cc.director.getCollisionManager().enabled=!0,cc.director.getCollisionManager().enabledDebugDraw=!0,this.setMouseInputControl(),this.setKeyboardInputControl(),1==this.gameMode?(cc.log("gamemode: STG"),this.player.getComponent("player").spaceMoving=!1,this.ai1.destroy(),this.playerScorePanel.destroy(),this.ai1ScorePanel.destroy()):2==this.gameMode&&(cc.log("gamemode: PUBG"),this.boss.destroy(),this.player.getComponent("player").spaceMoving=!0)},update:function(t){this.playerScorePanel.string="Your Score:"+this.playerScore.toString(),this.ai1ScorePanel.string="Enemy Score:"+this.ai1Score.toString(),2==this.gameMode&&(this.setAi1MouseInputControl(t),this.setAi1KeyboardInputControl(t))},setMouseInputControl:function(){var t=this;cc.eventManager.addListener({event:cc.EventListener.MOUSE,onMouseDown:function(e){t.player.getComponent("player").mousePressed=!0,t.player.getComponent("player").mousePosX=e.getLocationX(),t.player.getComponent("player").mousePosY=e.getLocationY()},onMouseMove:function(e){t.player.getComponent("player").mousePosX=e.getLocationX(),t.player.getComponent("player").mousePosY=e.getLocationY()},onMouseUp:function(e){t.player.getComponent("player").mousePressed=!1}},t.node)},setKeyboardInputControl:function(){var t=this;cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(e,i){switch(e){case cc.KEY.a:case cc.KEY.left:t.player.getComponent("player").accLeft=!0,t.player.getComponent("player").accRight=!1,t.player.getComponent("player").moveLeft=!0,t.player.getComponent("player").moveRight=!1;break;case cc.KEY.d:case cc.KEY.right:t.player.getComponent("player").accLeft=!1,t.player.getComponent("player").accRight=!0,t.player.getComponent("player").moveLeft=!1,t.player.getComponent("player").moveRight=!0;break;case cc.KEY.w:case cc.KEY.up:t.player.getComponent("player").accUp=!0,t.player.getComponent("player").accDown=!1,t.player.getComponent("player").moveUp=!0,t.player.getComponent("player").moveDown=!1;break;case cc.KEY.s:case cc.KEY.down:t.player.getComponent("player").accUp=!1,t.player.getComponent("player").accDown=!0,t.player.getComponent("player").moveUp=!1,t.player.getComponent("player").moveDown=!0;break;case cc.KEY.shift:t.player.getComponent("player").slowMode=!0;break;case cc.KEY.z:t.player.getComponent("player").shooting=!0}},onKeyReleased:function(e,i){switch(e){case cc.KEY.a:case cc.KEY.left:t.player.getComponent("player").accLeft=!1,t.player.getComponent("player").moveLeft=!1;break;case cc.KEY.d:case cc.KEY.right:t.player.getComponent("player").accRight=!1,t.player.getComponent("player").moveRight=!1;break;case cc.KEY.w:case cc.KEY.up:t.player.getComponent("player").accUp=!1,t.player.getComponent("player").moveUp=!1;break;case cc.KEY.s:case cc.KEY.down:t.player.getComponent("player").accDown=!1,t.player.getComponent("player").moveDown=!1;break;case cc.KEY.shift:t.player.getComponent("player").slowMode=!1;break;case cc.KEY.z:t.player.getComponent("player").shooting=!1}}},t.node)},setAi1MouseInputControl:function(t){this.ai1.getComponent("ai1").mousePressed=!0,this.ai1.getComponent("ai1").mousePosX=this.player.x+this.node.width/2+80*cc.randomMinus1To1(),this.ai1.getComponent("ai1").mousePosY=this.player.y+this.node.height/2+80*cc.randomMinus1To1()},setAi1KeyboardInputControl:function(t){var e=.5+2*cc.random0To1();if(this.ai1MovingT+=t,this.ai1MovingT>e){this.ai1MovingT=0;var i=cc.random0To1(),o=cc.random0To1();i>.5?(this.ai1.getComponent("ai1").accLeft=!0,this.ai1.getComponent("ai1").accRight=!1,this.ai1.getComponent("ai1").moveLeft=!0,this.ai1.getComponent("ai1").moveRight=!1):(this.ai1.getComponent("ai1").accLeft=!1,this.ai1.getComponent("ai1").accRight=!0,this.ai1.getComponent("ai1").moveLeft=!1,this.ai1.getComponent("ai1").moveRight=!0),o>.5?(this.ai1.getComponent("ai1").accUp=!0,this.ai1.getComponent("ai1").accDown=!1,this.ai1.getComponent("ai1").moveUp=!0,this.ai1.getComponent("ai1").moveDown=!1):(this.ai1.getComponent("ai1").accUp=!1,this.ai1.getComponent("ai1").accDown=!0,this.ai1.getComponent("ai1").moveUp=!1,this.ai1.getComponent("ai1").moveDown=!0)}}}),cc._RF.pop()},{}],mouse:[function(t,e,i){"use strict";cc._RF.push(e,"15c2d2eOvlGGZD9D/TrH9e5","mouse"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.moseMoving=!1,this.mouseClickAction=!1,this.mouseClickStatus=!1,this.mouseReleaseAction=!1,this.mouseReleaseStatus=!1},update:function(t){}}),cc._RF.pop()},{}],player:[function(t,e,o){"use strict";cc._RF.push(e,"d8caed+5dRHfJ+m/6Vs/5Ak","player"),cc.Class({extends:t("creature"),properties:{spaceMoving:!1,Damping:.01,accel:0,maxMoveSpeed:0,playerBulletPrefab:{default:null,type:cc.Prefab},bulletInterval:.3,bulletTag:1001},onLoad:function(){this.accLeft=!1,this.accRight=!1,this.accUp=!1,this.accDown=!1,this.moveLeft=!1,this.moveRight=!1,this.moveUp=!1,this.moveDown=!1,this.slowMode=!1,this.xSpeed=0,this.ySpeed=0,this.mousePosX=0,this.mousePosY=0,this.mousePressed=!1,this.playerNewBullets=[],this.T=0,this.counter=0},onCollisionEnter:function(t,e){t.tag!=this.bulletTag&&(this.node.setPositionX(0),this.node.setPositionY(-210),1101==t.tag&&(this.node.parent.getComponent("game").ai1Score+=1))},update:function(t){this.ifPlayerMove(t),this.keepInsideBoundary(),(this.mousePressed||this.shooting)&&this.playerShoot(t,this.getTheta())},ifPlayerMove:function(t){if(this.spaceMoving)this.spaceMoving&&(this.accLeft?this.xSpeed-=this.accel*t:this.accRight&&(this.xSpeed+=this.accel*t),this.accUp?this.ySpeed+=this.accel*t:this.accDown&&(this.ySpeed-=this.accel*t),this.xSpeed*=1-this.Damping,this.ySpeed*=1-this.Damping);else{var e=this.slowMode?.4:1;this.moveLeft?this.xSpeed=-1*e*this.maxMoveSpeed:this.moveRight?this.xSpeed=e*this.maxMoveSpeed:this.xSpeed=0,this.moveUp?this.ySpeed=e*this.maxMoveSpeed:this.moveDown?this.ySpeed=-1*e*this.maxMoveSpeed:this.ySpeed=0,0!=this.xSpeed&&0!=this.ySpeed&&(this.xSpeed=Math.sqrt(2)*this.xSpeed,this.ySpeed=Math.sqrt(2)*this.ySpeed)}Math.abs(this.xSpeed)>this.maxMoveSpeed&&(this.xSpeed=this.maxMoveSpeed*this.xSpeed/Math.abs(this.xSpeed)),Math.abs(this.ySpeed)>this.maxMoveSpeed&&(this.ySpeed=this.maxMoveSpeed*this.ySpeed/Math.abs(this.ySpeed)),this.node.x+=this.xSpeed*t,this.node.y+=this.ySpeed*t},getTheta:function(){var t=this.node.x+this.node.parent.width/2,e=this.node.y+this.node.parent.height/2;if(this.shooting)i=Math.PI/2;else{var i=Math.asin((this.mousePosY-e)/Math.sqrt((e-this.mousePosY)*(e-this.mousePosY)+(t-this.mousePosX)*(t-this.mousePosX)));this.mousePosX-t<0&&(i=Math.PI-i)}return i},playerShoot:function(t,e){if(this.T+=t,this.T>this.bulletInterval*this.counter){this.counter+=1,this.playerNewBullets[i]=cc.instantiate(this.playerBulletPrefab);this.playerNewBullets[i].addComponent("specialBullet");var o=this.playerNewBullets[i].getComponent("specialBullet");o.speed=500,o.theta=e,this.playerNewBullets[i].getComponent(cc.CircleCollider).tag=this.bulletTag,this.playerNewBullets[i].setPosition(this.node.x,this.node.y),this.node.parent.addChild(this.playerNewBullets[i])}}}),cc._RF.pop()},{creature:"creature"}],specialBullet:[function(t,e,i){"use strict";cc._RF.push(e,"d7810625u5O5ZZGCgcoNdnG","specialBullet"),cc.Class({extends:t("bullet"),update:function(t){this.bulletPositionUpdate(t),this.bulletDestroyIfOut(),this.node.rotation+=720*t,this.node.width+=2,this.node.height+=2,this.getComponent(cc.CircleCollider).radius+=.8}}),cc._RF.pop()},{bullet:"bullet"}]},{},["background","bullet","specialBullet","ai1","boss","creature","enemy","player","game","JoystickMoving","JoystickMovingBG","JoystickMovingCommon","JoystickShooting","JoystickShootingBG","JoystickShootingCommon","mouse"]);